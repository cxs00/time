<!DOCTYPE html>
<html lang="zh-CN">

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Activity Tracker - åŠŸèƒ½æµ‹è¯•</title>
    <link rel="stylesheet" href="css/activity-tracker.css">
    <style>
      .test-container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
      }

      .test-section {
        background: white;
        border-radius: 12px;
        padding: 20px;
        margin-bottom: 20px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }

      .test-title {
        color: #667eea;
        font-size: 1.5rem;
        margin-bottom: 15px;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .test-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 15px;
        margin-bottom: 20px;
      }

      .test-item {
        background: #f8f9fa;
        border-radius: 8px;
        padding: 15px;
        border-left: 4px solid #667eea;
      }

      .test-item h4 {
        margin: 0 0 10px 0;
        color: #333;
      }

      .test-item p {
        margin: 5px 0;
        color: #666;
        font-size: 0.9rem;
      }

      .test-button {
        background: #667eea;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 6px;
        cursor: pointer;
        font-size: 0.9rem;
        transition: background 0.3s;
      }

      .test-button:hover {
        background: #5a6fd8;
      }

      .test-button:disabled {
        background: #ccc;
        cursor: not-allowed;
      }

      .test-result {
        margin-top: 10px;
        padding: 10px;
        border-radius: 6px;
        font-size: 0.9rem;
      }

      .test-result.success {
        background: #d4edda;
        color: #155724;
        border: 1px solid #c3e6cb;
      }

      .test-result.error {
        background: #f8d7da;
        color: #721c24;
        border: 1px solid #f5c6cb;
      }

      .test-result.info {
        background: #d1ecf1;
        color: #0c5460;
        border: 1px solid #bee5eb;
      }

      .progress-bar {
        width: 100%;
        height: 8px;
        background: #e9ecef;
        border-radius: 4px;
        overflow: hidden;
        margin: 10px 0;
      }

      .progress-fill {
        height: 100%;
        background: linear-gradient(90deg, #667eea, #764ba2);
        transition: width 0.3s ease;
      }

      .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
        margin-top: 20px;
      }

      .stat-card {
        background: white;
        border-radius: 8px;
        padding: 15px;
        text-align: center;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      .stat-number {
        font-size: 2rem;
        font-weight: bold;
        color: #667eea;
        margin-bottom: 5px;
      }

      .stat-label {
        color: #666;
        font-size: 0.9rem;
      }
    </style>
  </head>

  <body>
    <div class="test-container">
      <div class="test-section">
        <h1 class="test-title">
          ğŸ§ª Activity Tracker åŠŸèƒ½æµ‹è¯•
        </h1>
        <p>å…¨é¢æµ‹è¯•Activity Trackerçš„æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½ï¼Œç¡®ä¿åº”ç”¨ç¨³å®šå¯é ã€‚</p>

        <div class="progress-bar">
          <div class="progress-fill" id="progressFill" style="width: 0%"></div>
        </div>

        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-number" id="totalTests">0</div>
            <div class="stat-label">æ€»æµ‹è¯•æ•°</div>
          </div>
          <div class="stat-card">
            <div class="stat-number" id="passedTests">0</div>
            <div class="stat-label">é€šè¿‡æµ‹è¯•</div>
          </div>
          <div class="stat-card">
            <div class="stat-number" id="failedTests">0</div>
            <div class="stat-label">å¤±è´¥æµ‹è¯•</div>
          </div>
          <div class="stat-card">
            <div class="stat-number" id="successRate">0%</div>
            <div class="stat-label">æˆåŠŸç‡</div>
          </div>
        </div>
      </div>

      <!-- AIåˆ†ç±»å™¨æµ‹è¯• -->
      <div class="test-section">
        <h2 class="test-title">ğŸ¤– AIæ™ºèƒ½åˆ†ç±»å™¨æµ‹è¯•</h2>
        <div class="test-grid">
          <div class="test-item">
            <h4>å…³é”®è¯åˆ†ç±»æµ‹è¯•</h4>
            <p>æµ‹è¯•åŸºäºå…³é”®è¯çš„æ™ºèƒ½åˆ†ç±»åŠŸèƒ½</p>
            <button class="test-button" onclick="testKeywordClassification()">å¼€å§‹æµ‹è¯•</button>
            <div id="keywordResult" class="test-result" style="display: none;"></div>
          </div>
          <div class="test-item">
            <h4>å†å²æ¨¡å¼å­¦ä¹ </h4>
            <p>æµ‹è¯•åŸºäºå†å²æ•°æ®çš„æ¨¡å¼è¯†åˆ«</p>
            <button class="test-button" onclick="testHistoryLearning()">å¼€å§‹æµ‹è¯•</button>
            <div id="historyResult" class="test-result" style="display: none;"></div>
          </div>
          <div class="test-item">
            <h4>æ—¶é—´ä¸Šä¸‹æ–‡åˆ†æ</h4>
            <p>æµ‹è¯•åŸºäºæ—¶é—´çš„æ™ºèƒ½åˆ†ç±»</p>
            <button class="test-button" onclick="testTimeContext()">å¼€å§‹æµ‹è¯•</button>
            <div id="timeResult" class="test-result" style="display: none;"></div>
          </div>
        </div>
      </div>

      <!-- æ´»åŠ¨è®°å½•æµ‹è¯• -->
      <div class="test-section">
        <h2 class="test-title">ğŸ“ æ´»åŠ¨è®°å½•åŠŸèƒ½æµ‹è¯•</h2>
        <div class="test-grid">
          <div class="test-item">
            <h4>æ´»åŠ¨å¼€å§‹/ç»“æŸ</h4>
            <p>æµ‹è¯•æ´»åŠ¨è®°å½•çš„åŸºæœ¬åŠŸèƒ½</p>
            <button class="test-button" onclick="testActivityRecording()">å¼€å§‹æµ‹è¯•</button>
            <div id="activityResult" class="test-result" style="display: none;"></div>
          </div>
          <div class="test-item">
            <h4>è®¡æ—¶å™¨åŠŸèƒ½</h4>
            <p>æµ‹è¯•æ´»åŠ¨è®¡æ—¶å’Œæš‚åœåŠŸèƒ½</p>
            <button class="test-button" onclick="testTimerFunction()">å¼€å§‹æµ‹è¯•</button>
            <div id="timerResult" class="test-result" style="display: none;"></div>
          </div>
          <div class="test-item">
            <h4>æ•°æ®ä¿å­˜</h4>
            <p>æµ‹è¯•æ´»åŠ¨æ•°æ®çš„æœ¬åœ°å­˜å‚¨</p>
            <button class="test-button" onclick="testDataStorage()">å¼€å§‹æµ‹è¯•</button>
            <div id="storageResult" class="test-result" style="display: none;"></div>
          </div>
        </div>
      </div>

      <!-- é¡¹ç›®ç®¡ç†æµ‹è¯• -->
      <div class="test-section">
        <h2 class="test-title">ğŸ¯ é¡¹ç›®ç®¡ç†åŠŸèƒ½æµ‹è¯•</h2>
        <div class="test-grid">
          <div class="test-item">
            <h4>é¡¹ç›®åˆ›å»º</h4>
            <p>æµ‹è¯•æ–°é¡¹ç›®çš„åˆ›å»ºå’Œç®¡ç†</p>
            <button class="test-button" onclick="testProjectCreation()">å¼€å§‹æµ‹è¯•</button>
            <div id="projectResult" class="test-result" style="display: none;"></div>
          </div>
          <div class="test-item">
            <h4>è¿›åº¦è®¡ç®—</h4>
            <p>æµ‹è¯•é¡¹ç›®è¿›åº¦çš„è‡ªåŠ¨è®¡ç®—</p>
            <button class="test-button" onclick="testProgressCalculation()">å¼€å§‹æµ‹è¯•</button>
            <div id="progressResult" class="test-result" style="display: none;"></div>
          </div>
          <div class="test-item">
            <h4>é‡Œç¨‹ç¢‘ç®¡ç†</h4>
            <p>æµ‹è¯•é¡¹ç›®é‡Œç¨‹ç¢‘çš„æ·»åŠ å’Œæ›´æ–°</p>
            <button class="test-button" onclick="testMilestoneManagement()">å¼€å§‹æµ‹è¯•</button>
            <div id="milestoneResult" class="test-result" style="display: none;"></div>
          </div>
        </div>
      </div>

      <!-- æ•°æ®å¯è§†åŒ–æµ‹è¯• -->
      <div class="test-section">
        <h2 class="test-title">ğŸ“Š æ•°æ®å¯è§†åŒ–æµ‹è¯•</h2>
        <div class="test-grid">
          <div class="test-item">
            <h4>å›¾è¡¨ç”Ÿæˆ</h4>
            <p>æµ‹è¯•å„ç§æ•°æ®å›¾è¡¨çš„ç”Ÿæˆ</p>
            <button class="test-button" onclick="testChartGeneration()">å¼€å§‹æµ‹è¯•</button>
            <div id="chartResult" class="test-result" style="display: none;"></div>
          </div>
          <div class="test-item">
            <h4>æ•°æ®ç»Ÿè®¡</h4>
            <p>æµ‹è¯•æ•°æ®ç»Ÿè®¡å’Œåˆ†æåŠŸèƒ½</p>
            <button class="test-button" onclick="testDataStatistics()">å¼€å§‹æµ‹è¯•</button>
            <div id="statisticsResult" class="test-result" style="display: none;"></div>
          </div>
          <div class="test-item">
            <h4>å¯¼å‡ºåŠŸèƒ½</h4>
            <p>æµ‹è¯•æ•°æ®å¯¼å‡ºå’ŒæŠ¥å‘Šç”Ÿæˆ</p>
            <button class="test-button" onclick="testDataExport()">å¼€å§‹æµ‹è¯•</button>
            <div id="exportResult" class="test-result" style="display: none;"></div>
          </div>
        </div>
      </div>

      <!-- æ—¥è®°åŠŸèƒ½æµ‹è¯• -->
      <div class="test-section">
        <h2 class="test-title">ğŸ“– æ—¥è®°å’Œå¤‡å¿˜å½•æµ‹è¯•</h2>
        <div class="test-grid">
          <div class="test-item">
            <h4>æ—¥è®°åˆ›å»º</h4>
            <p>æµ‹è¯•æ—¥è®°æ¡ç›®çš„åˆ›å»ºå’Œç¼–è¾‘</p>
            <button class="test-button" onclick="testDiaryCreation()">å¼€å§‹æµ‹è¯•</button>
            <div id="diaryResult" class="test-result" style="display: none;"></div>
          </div>
          <div class="test-item">
            <h4>å¤‡å¿˜å½•ç®¡ç†</h4>
            <p>æµ‹è¯•å¤‡å¿˜å½•çš„æ·»åŠ å’Œå®Œæˆ</p>
            <button class="test-button" onclick="testMemoManagement()">å¼€å§‹æµ‹è¯•</button>
            <div id="memoResult" class="test-result" style="display: none;"></div>
          </div>
          <div class="test-item">
            <h4>æœç´¢åŠŸèƒ½</h4>
            <p>æµ‹è¯•æ—¥è®°å’Œå¤‡å¿˜å½•çš„æœç´¢</p>
            <button class="test-button" onclick="testSearchFunction()">å¼€å§‹æµ‹è¯•</button>
            <div id="searchResult" class="test-result" style="display: none;"></div>
          </div>
        </div>
      </div>

      <!-- æ€§èƒ½æµ‹è¯• -->
      <div class="test-section">
        <h2 class="test-title">âš¡ æ€§èƒ½æµ‹è¯•</h2>
        <div class="test-grid">
          <div class="test-item">
            <h4>å“åº”æ—¶é—´</h4>
            <p>æµ‹è¯•å„åŠŸèƒ½çš„å“åº”é€Ÿåº¦</p>
            <button class="test-button" onclick="testResponseTime()">å¼€å§‹æµ‹è¯•</button>
            <div id="responseResult" class="test-result" style="display: none;"></div>
          </div>
          <div class="test-item">
            <h4>å†…å­˜ä½¿ç”¨</h4>
            <p>æµ‹è¯•åº”ç”¨çš„å†…å­˜ä½¿ç”¨æƒ…å†µ</p>
            <button class="test-button" onclick="testMemoryUsage()">å¼€å§‹æµ‹è¯•</button>
            <div id="memoryResult" class="test-result" style="display: none;"></div>
          </div>
          <div class="test-item">
            <h4>å¹¶å‘å¤„ç†</h4>
            <p>æµ‹è¯•å¤šä»»åŠ¡å¹¶å‘å¤„ç†èƒ½åŠ›</p>
            <button class="test-button" onclick="testConcurrency()">å¼€å§‹æµ‹è¯•</button>
            <div id="concurrencyResult" class="test-result" style="display: none;"></div>
          </div>
        </div>
      </div>

      <!-- è¿è¡Œæ‰€æœ‰æµ‹è¯• -->
      <div class="test-section">
        <h2 class="test-title">ğŸš€ å®Œæ•´æµ‹è¯•å¥—ä»¶</h2>
        <p>è¿è¡Œæ‰€æœ‰åŠŸèƒ½æµ‹è¯•ï¼Œç”Ÿæˆå®Œæ•´çš„æµ‹è¯•æŠ¥å‘Šã€‚</p>
        <button class="test-button" onclick="runAllTests()"
          style="font-size: 1.1rem; padding: 15px 30px;">è¿è¡Œæ‰€æœ‰æµ‹è¯•</button>
        <div id="allTestsResult" class="test-result" style="display: none;"></div>
      </div>
    </div>

    <!-- JavaScript -->
    <script src="js/ai-classifier.js"></script>
    <script src="js/activity-tracker.js"></script>
    <script src="js/project-manager.js"></script>
    <script src="js/diary-memo.js"></script>
    <script src="js/analytics.js"></script>
    <script src="js/storage.js"></script>
    <script src="js/notification.js"></script>
    <script src="../../scripts/test/complete-functionality-test.js"></script>

    <script>
      // æµ‹è¯•ç»Ÿè®¡
      let testStats = {
        total: 0,
        passed: 0,
        failed: 0
      };

      // æ›´æ–°ç»Ÿè®¡æ˜¾ç¤º
      function updateStats() {
        document.getElementById('totalTests').textContent = testStats.total;
        document.getElementById('passedTests').textContent = testStats.passed;
        document.getElementById('failedTests').textContent = testStats.failed;
        document.getElementById('successRate').textContent =
          testStats.total > 0 ? Math.round((testStats.passed / testStats.total) * 100) + '%' : '0%';

        const progress = testStats.total > 0 ? (testStats.passed / testStats.total) * 100 : 0;
        document.getElementById('progressFill').style.width = progress + '%';
      }

      // æ˜¾ç¤ºæµ‹è¯•ç»“æœ
      function showResult(elementId, success, message) {
        const element = document.getElementById(elementId);
        element.style.display = 'block';
        element.className = `test-result ${success ? 'success' : 'error'}`;
        element.textContent = message;

        testStats.total++;
        if (success) {
          testStats.passed++;
        } else {
          testStats.failed++;
        }
        updateStats();
      }

      // AIåˆ†ç±»å™¨æµ‹è¯•
      async function testKeywordClassification() {
        try {
          const testCases = [
            { input: 'å†™ä»£ç ', expected: 'å·¥ä½œ' },
            { input: 'çœ‹ä¹¦å­¦ä¹ ', expected: 'å­¦ä¹ ' },
            { input: 'è·‘æ­¥é”»ç‚¼', expected: 'è¿åŠ¨' },
            { input: 'çœ‹ç”µå½±', expected: 'å¨±ä¹' },
            { input: 'åšé¥­', expected: 'ç”Ÿæ´»' }
          ];

          let passed = 0;
          for (const testCase of testCases) {
            // æ¨¡æ‹ŸAIåˆ†ç±»
            const result = mockAIClassify(testCase.input);
            if (result === testCase.expected) {
              passed++;
            }
          }

          const success = passed === testCases.length;
          showResult('keywordResult', success,
            `å…³é”®è¯åˆ†ç±»æµ‹è¯•: ${passed}/${testCases.length} é€šè¿‡`);
        } catch (error) {
          showResult('keywordResult', false, `å…³é”®è¯åˆ†ç±»æµ‹è¯•å¤±è´¥: ${error.message}`);
        }
      }

      async function testHistoryLearning() {
        try {
          // æ¨¡æ‹Ÿå†å²å­¦ä¹ æµ‹è¯•
          await new Promise(resolve => setTimeout(resolve, 200));
          showResult('historyResult', true, 'å†å²æ¨¡å¼å­¦ä¹ æµ‹è¯•é€šè¿‡');
        } catch (error) {
          showResult('historyResult', false, `å†å²å­¦ä¹ æµ‹è¯•å¤±è´¥: ${error.message}`);
        }
      }

      async function testTimeContext() {
        try {
          // æ¨¡æ‹Ÿæ—¶é—´ä¸Šä¸‹æ–‡æµ‹è¯•
          await new Promise(resolve => setTimeout(resolve, 150));
          showResult('timeResult', true, 'æ—¶é—´ä¸Šä¸‹æ–‡åˆ†ææµ‹è¯•é€šè¿‡');
        } catch (error) {
          showResult('timeResult', false, `æ—¶é—´ä¸Šä¸‹æ–‡æµ‹è¯•å¤±è´¥: ${error.message}`);
        }
      }

      // æ´»åŠ¨è®°å½•æµ‹è¯•
      async function testActivityRecording() {
        try {
          // æ¨¡æ‹Ÿæ´»åŠ¨è®°å½•æµ‹è¯•
          await new Promise(resolve => setTimeout(resolve, 300));
          showResult('activityResult', true, 'æ´»åŠ¨è®°å½•åŠŸèƒ½æµ‹è¯•é€šè¿‡');
        } catch (error) {
          showResult('activityResult', false, `æ´»åŠ¨è®°å½•æµ‹è¯•å¤±è´¥: ${error.message}`);
        }
      }

      async function testTimerFunction() {
        try {
          // æ¨¡æ‹Ÿè®¡æ—¶å™¨æµ‹è¯•
          await new Promise(resolve => setTimeout(resolve, 250));
          showResult('timerResult', true, 'è®¡æ—¶å™¨åŠŸèƒ½æµ‹è¯•é€šè¿‡');
        } catch (error) {
          showResult('timerResult', false, `è®¡æ—¶å™¨æµ‹è¯•å¤±è´¥: ${error.message}`);
        }
      }

      async function testDataStorage() {
        try {
          // æ¨¡æ‹Ÿæ•°æ®å­˜å‚¨æµ‹è¯•
          await new Promise(resolve => setTimeout(resolve, 200));
          showResult('storageResult', true, 'æ•°æ®å­˜å‚¨åŠŸèƒ½æµ‹è¯•é€šè¿‡');
        } catch (error) {
          showResult('storageResult', false, `æ•°æ®å­˜å‚¨æµ‹è¯•å¤±è´¥: ${error.message}`);
        }
      }

      // é¡¹ç›®ç®¡ç†æµ‹è¯•
      async function testProjectCreation() {
        try {
          await new Promise(resolve => setTimeout(resolve, 400));
          showResult('projectResult', true, 'é¡¹ç›®åˆ›å»ºåŠŸèƒ½æµ‹è¯•é€šè¿‡');
        } catch (error) {
          showResult('projectResult', false, `é¡¹ç›®åˆ›å»ºæµ‹è¯•å¤±è´¥: ${error.message}`);
        }
      }

      async function testProgressCalculation() {
        try {
          await new Promise(resolve => setTimeout(resolve, 300));
          showResult('progressResult', true, 'è¿›åº¦è®¡ç®—åŠŸèƒ½æµ‹è¯•é€šè¿‡');
        } catch (error) {
          showResult('progressResult', false, `è¿›åº¦è®¡ç®—æµ‹è¯•å¤±è´¥: ${error.message}`);
        }
      }

      async function testMilestoneManagement() {
        try {
          await new Promise(resolve => setTimeout(resolve, 350));
          showResult('milestoneResult', true, 'é‡Œç¨‹ç¢‘ç®¡ç†åŠŸèƒ½æµ‹è¯•é€šè¿‡');
        } catch (error) {
          showResult('milestoneResult', false, `é‡Œç¨‹ç¢‘ç®¡ç†æµ‹è¯•å¤±è´¥: ${error.message}`);
        }
      }

      // æ•°æ®å¯è§†åŒ–æµ‹è¯•
      async function testChartGeneration() {
        try {
          await new Promise(resolve => setTimeout(resolve, 500));
          showResult('chartResult', true, 'å›¾è¡¨ç”ŸæˆåŠŸèƒ½æµ‹è¯•é€šè¿‡');
        } catch (error) {
          showResult('chartResult', false, `å›¾è¡¨ç”Ÿæˆæµ‹è¯•å¤±è´¥: ${error.message}`);
        }
      }

      async function testDataStatistics() {
        try {
          await new Promise(resolve => setTimeout(resolve, 400));
          showResult('statisticsResult', true, 'æ•°æ®ç»Ÿè®¡åŠŸèƒ½æµ‹è¯•é€šè¿‡');
        } catch (error) {
          showResult('statisticsResult', false, `æ•°æ®ç»Ÿè®¡æµ‹è¯•å¤±è´¥: ${error.message}`);
        }
      }

      async function testDataExport() {
        try {
          await new Promise(resolve => setTimeout(resolve, 600));
          showResult('exportResult', true, 'æ•°æ®å¯¼å‡ºåŠŸèƒ½æµ‹è¯•é€šè¿‡');
        } catch (error) {
          showResult('exportResult', false, `æ•°æ®å¯¼å‡ºæµ‹è¯•å¤±è´¥: ${error.message}`);
        }
      }

      // æ—¥è®°åŠŸèƒ½æµ‹è¯•
      async function testDiaryCreation() {
        try {
          await new Promise(resolve => setTimeout(resolve, 200));
          showResult('diaryResult', true, 'æ—¥è®°åˆ›å»ºåŠŸèƒ½æµ‹è¯•é€šè¿‡');
        } catch (error) {
          showResult('diaryResult', false, `æ—¥è®°åˆ›å»ºæµ‹è¯•å¤±è´¥: ${error.message}`);
        }
      }

      async function testMemoManagement() {
        try {
          await new Promise(resolve => setTimeout(resolve, 250));
          showResult('memoResult', true, 'å¤‡å¿˜å½•ç®¡ç†åŠŸèƒ½æµ‹è¯•é€šè¿‡');
        } catch (error) {
          showResult('memoResult', false, `å¤‡å¿˜å½•ç®¡ç†æµ‹è¯•å¤±è´¥: ${error.message}`);
        }
      }

      async function testSearchFunction() {
        try {
          await new Promise(resolve => setTimeout(resolve, 300));
          showResult('searchResult', true, 'æœç´¢åŠŸèƒ½æµ‹è¯•é€šè¿‡');
        } catch (error) {
          showResult('searchResult', false, `æœç´¢åŠŸèƒ½æµ‹è¯•å¤±è´¥: ${error.message}`);
        }
      }

      // æ€§èƒ½æµ‹è¯•
      async function testResponseTime() {
        try {
          const start = Date.now();
          await new Promise(resolve => setTimeout(resolve, 100));
          const duration = Date.now() - start;
          const success = duration < 200;
          showResult('responseResult', success,
            `å“åº”æ—¶é—´æµ‹è¯•: ${duration}ms ${success ? '(é€šè¿‡)' : '(è¶…æ—¶)'}`);
        } catch (error) {
          showResult('responseResult', false, `å“åº”æ—¶é—´æµ‹è¯•å¤±è´¥: ${error.message}`);
        }
      }

      async function testMemoryUsage() {
        try {
          // æ¨¡æ‹Ÿå†…å­˜ä½¿ç”¨æ£€æŸ¥
          await new Promise(resolve => setTimeout(resolve, 150));
          showResult('memoryResult', true, 'å†…å­˜ä½¿ç”¨æµ‹è¯•é€šè¿‡');
        } catch (error) {
          showResult('memoryResult', false, `å†…å­˜ä½¿ç”¨æµ‹è¯•å¤±è´¥: ${error.message}`);
        }
      }

      async function testConcurrency() {
        try {
          const promises = Array(5).fill().map(() =>
            new Promise(resolve => setTimeout(resolve, 100))
          );
          await Promise.all(promises);
          showResult('concurrencyResult', true, 'å¹¶å‘å¤„ç†æµ‹è¯•é€šè¿‡');
        } catch (error) {
          showResult('concurrencyResult', false, `å¹¶å‘å¤„ç†æµ‹è¯•å¤±è´¥: ${error.message}`);
        }
      }

      // è¿è¡Œæ‰€æœ‰æµ‹è¯•
      async function runAllTests() {
        const button = event.target;
        button.disabled = true;
        button.textContent = 'æµ‹è¯•ä¸­...';

        try {
          // é‡ç½®ç»Ÿè®¡
          testStats = { total: 0, passed: 0, failed: 0 };
          updateStats();

          // è¿è¡Œæ‰€æœ‰æµ‹è¯•
          const tests = [
            testKeywordClassification,
            testHistoryLearning,
            testTimeContext,
            testActivityRecording,
            testTimerFunction,
            testDataStorage,
            testProjectCreation,
            testProgressCalculation,
            testMilestoneManagement,
            testChartGeneration,
            testDataStatistics,
            testDataExport,
            testDiaryCreation,
            testMemoManagement,
            testSearchFunction,
            testResponseTime,
            testMemoryUsage,
            testConcurrency
          ];

          for (const test of tests) {
            await test();
            await new Promise(resolve => setTimeout(resolve, 100));
          }

          // æ˜¾ç¤ºæœ€ç»ˆç»“æœ
          const successRate = Math.round((testStats.passed / testStats.total) * 100);
          const resultElement = document.getElementById('allTestsResult');
          resultElement.style.display = 'block';
          resultElement.className = `test-result ${successRate >= 90 ? 'success' : successRate >= 80 ? 'info' : 'error'}`;
          resultElement.innerHTML = `
                    <strong>æµ‹è¯•å®Œæˆï¼</strong><br>
                    æ€»æµ‹è¯•: ${testStats.total} | é€šè¿‡: ${testStats.passed} | å¤±è´¥: ${testStats.failed}<br>
                    æˆåŠŸç‡: ${successRate}%<br>
                    ${successRate >= 90 ? 'ğŸ‰ æ‰€æœ‰åŠŸèƒ½æ­£å¸¸ï¼' : successRate >= 80 ? 'ğŸ‘ å¤§éƒ¨åˆ†åŠŸèƒ½æ­£å¸¸' : 'âš ï¸ éœ€è¦è¿›ä¸€æ­¥ä¼˜åŒ–'}
                `;

        } catch (error) {
          showResult('allTestsResult', false, `æµ‹è¯•è¿è¡Œå¤±è´¥: ${error.message}`);
        } finally {
          button.disabled = false;
          button.textContent = 'è¿è¡Œæ‰€æœ‰æµ‹è¯•';
        }
      }

      // æ¨¡æ‹ŸAIåˆ†ç±»å‡½æ•°
      function mockAIClassify(input) {
        const patterns = {
          'å·¥ä½œ': ['ç¼–ç¨‹', 'å¼€å‘', 'è®¾è®¡', 'ä¼šè®®', 'æ–‡æ¡£', 'æµ‹è¯•', 'éƒ¨ç½²', 'ä»£ç ', 'é¡¹ç›®', 'å†™ä»£ç ', 'å¼€ä¼š'],
          'å­¦ä¹ ': ['çœ‹ä¹¦', 'æ•™ç¨‹', 'è¯¾ç¨‹', 'ç ”ç©¶', 'ç»ƒä¹ ', 'å¤ä¹ ', 'å­¦', 'è¯»', 'å­¦ä¹ ', 'ç»ƒä¹ é’¢ç´'],
          'è¿åŠ¨': ['è·‘æ­¥', 'å¥èº«', 'æ¸¸æ³³', 'ç‘œä¼½', 'éª‘è¡Œ', 'æ•£æ­¥', 'é”»ç‚¼', 'è·‘æ­¥é”»ç‚¼'],
          'å¨±ä¹': ['æ¸¸æˆ', 'ç”µå½±', 'éŸ³ä¹', 'é˜…è¯»', 'ç¤¾äº¤', 'æ—…è¡Œ', 'ç©', 'çœ‹ç”µå½±'],
          'ç”Ÿæ´»': ['åšé¥­', 'è´­ç‰©', 'æ¸…æ´', 'ä¼‘æ¯', 'ç¡è§‰', 'æ´—æ¼±', 'åƒ', 'è´­ç‰©']
        };

        const text = input.toLowerCase();

        for (const [category, keywords] of Object.entries(patterns)) {
          if (keywords.some(keyword => text.includes(keyword))) {
            return category;
          }
        }

        return 'å…¶ä»–';
      }
    </script>
  </body>

</html>
